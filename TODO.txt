добавление в компанию
поиск компании которой управляет чел
поиск проектов которыми управляет
добавление ответственных в проект-->через существующий метод и при создании

admin@mail.ru  Admin1!  - админ
asa123A@mail.ru  Admin1!  - подтвержденный пользователь



--global---
входные\выходные надо обговаривать
//все возвращаемые данные надо приводить в json и предварительно собирать "модель возврата", обычные модели не получится тк там через цепочку объект хранит сам себя
почистить лишние юзинги
recruting->recruiting
логин\регистрация на поле для ввода пароля надо повесить type password


подтверждение почти закомменчено:
accountapi- Register-- 
userapi--ChangeStatusStudentInProject
убрать отслеживание изменений бд, там где можно
--end--global---


вроде+ потестить иньекции(экранирование) sql html js <script>alert('You are Hacked');</script>
setRepeatRefresh->layout

GetActualQueryEntity потестить

//проверить--при рестарте сервера весь hash у refresh token становится не актуальный
проверить--ограничить прикрепление к компаниям и проектам(нельзя закинуть кого угодно без его заявки\согласия)
вроде + для userProject,project,company. паралелизм обрабатывать(доступ к объекту в бд из нескольких потоков ,, status 527





project->AddImagesToDbSystem сохранение картинок максимально плохое, переписал просто что бы работало

все запросы меняют данные и сразу их сохраняют, мб так лучше не делать, докинуть методы которые просто меняют


есть пара методов которые сработают по просроченным токенам






//при отправке какого либо запроса проверять не отправлен ли сейчас запрос на обновление токена
//изменить урлы camel-> kebab
//userapi->GetProject,GetCompany -- дописать + swagger
//картинки в бд надо хранить хотя бы название или вообще путь
//запретить подавать заявку в свой проект, или как то продумать изменение статуса такого пользователя(могут быть проблемы из за того что 2 методы под каждую роль)

возможность восстановить пароль
хорошо бы на name competence поставить unique


!!!


userApi возвращаемые значения

--
к заявке можно прикреплять файлы
к проекту можно прикреплять тест\задания
в созданных проектах нельзя изменить город, хз стоит ли добавлять такой функционал
сделать подписку на технологии и город, компания подписывается на технологию и\или город, и когда кто то отправляет задание в другую компанию на другой проект, из за подписки это решение приходит и тем кто подписался
--


страницы и методы для get запросов(сейчас в companyc только post


статус проекта сейчас не влияет ни на что, мб блочить заявки или не отображать го в списке
должен быть предопределенный город "удаленка"


при рефреше если снова 401 значит надо перелогиниться





пагинация всего


сделать добавление управляющего в компанию только по запросам(тип нельзя просто взять и добавить любого чела по id)
сейчас любой управляющий может удалить другого управляющего, в том числе себя, что сделает проект "неуправляемым"




--
возможно сделать список в оперативке с id пользователей которых надо дополнительно проверять(например при 
смене логина заносить туда id пользователя на время жизни главного токена, что бы никто не мог зайти по старым токенам)




-----
очень хз тк проект может создать кто угодно
можно добавить функционал, если проект закрывается как выполненный, то указанные в проекте компетенции засчитываются тем кто в нем состоит

----












-------------------------------------------------------------------------
ХЗХЗ--добавление\удаление ответственных в проекты именно не через компанию а через сам проект
это вроде норм----если проект на несколько городов то локальные компетенции учитываются со всех городов проекта, это не особо правильно но нормально это не исправить
ВРОДЕ+ //не правильное объединение //#TODO #join
ХЗХЗ --refresh токены вынести в тдельную таблицу, что бы можно было поддерживать несколько(тут надо думать, тк много токенов это - безопасность)? + удобнее их будет дропать в случае чего+ можео туда докинуть дату
--запросы к бд распараллелить
--GetProjectCompany можно переписать под short data
мб норм-создание города- сейчас при создании проекта
---мб лучше токен хранить в куках(а у всех ли запросов есть куки?--не у всех), что бы можно было в несколько окон работать
ХЗХЗ--удаление картинок сейчас файлы точно не трутся, в бд хз



------------------------------------------------------------------------------------------------
//curent->>current
//!!!!в методе GetCurentId в catch "просрочено" надо получать id пользователя без декодирования токена и возвращать его
//что то не так с получением hash кода у refresh token
//функционал для получения списка проектов компании
//получить свои компании
//получить свои проекты
//получить проекты в которые подал заявки(по типам)
//добавление\удаление пользователей в компании
//запретить 2 раза добавлять 1 город к 1 проекту, это не логично+ может все сломать
//при обычном логине токены тоже записывать
//проверить работают ли токены
//проверить работает ли получение userId если обратиться через обычную страницу
//сейчас есть метод gettoken но метод регистрации вынесен в page
//хранить картинки в файлах а не в байтах
//#TODO надо подсвечивать куда подал заявку GetActualProject
//FromForm- добавлены для использования postman и js
//при логине и регистрации перезаписывать reftoken ХЭШЕМ
//--добавить главное изображение к проекту
//при редактировании проекта нельзя добавить компетенции
//кое как пофиксил подтверждением почты---сейчас проект в топ можно поднять бесконечно создавая учетки и подавая заявку на проект, нужно подтверждение почты
//!await _userManager.IsEmailConfirmedAsync(user)
//поиск по проектам GetProjectByStartName
//надо потестить картинки, тк сейчас они если и сохраняются то скорее всего без формата(company->SetImage, project->AddImagesToDbSystem)
//сделать метод logout который будет удалять refresh token
//надо файлы проверять что бы можно было закинуть только картинки
//для пользователя: описание, компетенции









